"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[9054],{51107:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(58168),n=a(96540),i=a(20053),o=a(21312),l=a(6342),s=a(75489);const c={anchorWithStickyNavbar:"anchorWithStickyNavbar_LWe7",anchorWithHideOnScrollNavbar:"anchorWithHideOnScrollNavbar_WYt5"};function d(e){let{as:t,id:a,...d}=e;const{navbar:{hideOnScroll:h}}=(0,l.p)();if("h1"===t||!a)return n.createElement(t,(0,r.A)({},d,{id:void 0}));const u=(0,o.T)({id:"theme.common.headingLinkTitle",message:"Direct link to {heading}",description:"Title for link to heading"},{heading:"string"==typeof d.children?d.children:a});return n.createElement(t,(0,r.A)({},d,{className:(0,i.A)("anchor",h?c.anchorWithHideOnScrollNavbar:c.anchorWithStickyNavbar,d.className),id:a}),d.children,n.createElement(s.A,{className:"hash-link",to:`#${a}`,"aria-label":u,title:u},"\u200b"))}},76684:(e,t,a)=>{a.d(t,{c:()=>d,A:()=>h});var r=a(96540);const n={loadingOrFailed:"loadingOrFailed_NuqP",loading:"loading_PwrK",failed:"failed_Xr5a",fullscreen:"fullscreen_VAEq",footer:"footer_gakN",toolbarButton:"toolbarButton_Uwut",toolbar:"toolbar_tpzs",viewTypeWrapper:"viewTypeWrapper_Al25",datePickerWrapper:"datePickerWrapper_EUWW",spinner:"spinner_w5sl",spin:"spin_l4i9"};var i=a(59386),o=a.n(i),l=(a(81180),a(20053)),s=a(98027),c=a(61578);let d=function(e){return e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded",e[e.Failed=2]="Failed",e}({});function h(e){const[t,a]=(0,r.useState)(!1),[i,h]=(0,r.useState)(!1),u=()=>{h(!0),setTimeout((()=>{h(!1),e.onRetry()}),200)};return e.state===d.Loading||i?r.createElement("div",{className:(0,l.A)(n.loadingOrFailed,n.loading)},r.createElement("div",{className:n.spinner}),r.createElement("p",null,"Loading ",e.title," chart...")):e.state===d.Failed?r.createElement("div",{className:(0,l.A)(n.loadingOrFailed,n.failed)},r.createElement("p",null,"Failed to load data for ",e.title," chart"),r.createElement("button",{className:"btn btn-primary",onClick:u},"Retry")):r.createElement("div",{className:t?n.fullscreen:void 0},r.createElement("div",{className:n.toolbar},e.enableViewMode&&e.viewMode&&e.onViewModeChange&&r.createElement("div",{className:n.viewTypeWrapper},r.createElement("button",{onClick:()=>e.onViewModeChange("all"),disabled:"all"===e.viewMode},"All"),r.createElement("button",{onClick:()=>e.onViewModeChange("monthly"),disabled:"monthly"===e.viewMode},"Monthly"),r.createElement("button",{onClick:()=>e.onViewModeChange("yearly"),disabled:"yearly"===e.viewMode},"Yearly")),e.enableDateControls&&r.createElement("div",{className:n.datePickerWrapper},e.onPrev&&r.createElement("button",{onClick:e.onPrev},"<"),e.onNext&&r.createElement("button",{onClick:e.onNext},">"),e.onDateChange&&r.createElement(o(),{selected:e.selectedDate,onChange:e.onDateChange,dateFormat:e.datePickerIsMonthsOnly?"MMM yyyy":"dd MMM yyyy",showMonthYearPicker:e.datePickerIsMonthsOnly}))),e.children,r.createElement("div",{className:n.footer},r.createElement("button",{className:n.toolbarButton,onClick:()=>a(!t)},t?r.createElement(r.Fragment,null,r.createElement(c.GWt,null)," Exit Fullscreen"):r.createElement(r.Fragment,null,r.createElement(s._AH,null)," Fullscreen")),e.onSave&&r.createElement("button",{className:n.toolbarButton,onClick:e.onSave},r.createElement(s.dIn,null)," Save Image")))}},29483:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(96540),n=a(2898),i=a(93551),o=a(17559),l=a(93975),s=a(20053);const c=[{type:"link",label:"Charts Home",href:"/charts"},{type:"category",label:"Transport",items:[{type:"link",label:"Parking Spaces Over Time",href:"/charts/transport/parking-over-time"},{type:"link",label:"Vehicle Colours",href:"/charts/transport/vehicle-colors"},{type:"link",label:"Vehicle Makes",href:"/charts/transport/vehicle-makes"},{type:"link",label:"Registered Vehicles",href:"/charts/transport/registered-vehicles"},{type:"link",label:"Bus Passengers",href:"/charts/transport/bus-passengers"},{type:"link",label:"Road Traffic",href:"/charts/transport/road-traffic"},{type:"link",label:"Driving Test Results",href:"/charts/transport/driving-test-results"}]},{type:"category",label:"Weather",items:[{type:"link",label:"Monthly Rainfall between 1894 and 2021",href:"/charts/weather/monthly-rainfall"}]}];function d(){return r.createElement("aside",{className:(0,s.A)(o.G.docs.docSidebarContainer,i.A.docSidebarContainer)},r.createElement(l.A,{sidebar:c,path:"/charts",onCollapse:function(){throw new Error("Function not implemented.")},isHidden:!1}))}var h=a(5976),u=a(3042),f=a(37346),m=a(15549);const y={chartsHeader:"chartsHeader_tuLv"};function v(e){let{children:t,title:a,subCategory:i,isChartsPage:l}=e;return r.createElement(m.A,{title:a},r.createElement("div",{className:y.chartsHeader},"Charts"),r.createElement("div",{className:n.A.docPage},r.createElement(d,null),r.createElement("main",{className:(0,s.A)(f.A.docMainContainer)},r.createElement("div",{className:(0,s.A)("container","padding-top--md","padding-bottom--lg")},r.createElement("div",{className:h.A.docItemContainer},r.createElement("article",null,r.createElement("nav",{className:u.A.breadcrumbsContainer},r.createElement("ul",{className:"breadcrumbs"},!l&&r.createElement("li",{className:"breadcrumbs__item"},r.createElement("a",{className:"breadcrumbs__link",href:"/charts"},"Charts")),i&&r.createElement("li",{className:"breadcrumbs__item"},r.createElement("a",{className:"breadcrumbs__link"},i)),r.createElement("li",{className:"breadcrumbs__item breadcrumbs__item--active"},r.createElement("span",{className:"breadcrumbs__link"},a),r.createElement("meta",{itemProp:"position",content:"2"})))),r.createElement("div",{className:(0,s.A)(o.G.docs.docMarkdown,"marklown")},t)))))))}},39350:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var r=a(29483),n=a(76684),i=a(51107),o=a(81014),l=a(66118),s=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),c=function(e){var t,a=[];for(e=[].concat(e);e.length;)"string"==typeof(t=e.pop())?a.unshift.apply(a,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):(0,o.k)(e)||a.unshift(""+t);return a},d=function(e,t,a){var r,n=[].concat(t),i=n.length,o=e.font,l=0;for(e.font=a.string,r=0;r<i;++r)l=Math.max(e.measureText(n[r]).width,l);return e.font=o,{height:i*a.lineHeight,width:l}},h=function(e,t,a){return Math.max(e,Math.min(t,a))},u=function(e,t){var a,r,n,i,o=e.slice(),l=[];for(a=0,n=t.length;a<n;++a)i=t[a],-1===(r=o.indexOf(i))?l.push([i,1]):o.splice(r,1);for(a=0,n=o.length;a<n;++a)l.push([o[a],-1]);return l};function f(e,t){var a=t.x,r=t.y;if(null===a)return{x:0,y:-1};if(null===r)return{x:1,y:0};var n=e.x-a,i=e.y-r,o=Math.sqrt(n*n+i*i);return{x:o?n/o:0,y:o?i/o:-1}}var m=0,y=1,v=2,b=4,p=8;function x(e,t,a){var r=m;return e<a.left?r|=y:e>a.right&&(r|=v),t<a.top?r|=p:t>a.bottom&&(r|=b),r}function g(e,t){var a,r,n=t.anchor,i=e;return t.clamp&&(i=function(e,t){for(var a,r,n,i=e.x0,o=e.y0,l=e.x1,s=e.y1,c=x(i,o,t),d=x(l,s,t);c|d&&!(c&d);)(a=c||d)&p?(r=i+(l-i)*(t.top-o)/(s-o),n=t.top):a&b?(r=i+(l-i)*(t.bottom-o)/(s-o),n=t.bottom):a&v?(n=o+(s-o)*(t.right-i)/(l-i),r=t.right):a&y&&(n=o+(s-o)*(t.left-i)/(l-i),r=t.left),a===c?c=x(i=r,o=n,t):d=x(l=r,s=n,t);return{x0:i,x1:l,y0:o,y1:s}}(i,t.area)),"start"===n?(a=i.x0,r=i.y0):"end"===n?(a=i.x1,r=i.y1):(a=(i.x0+i.x1)/2,r=(i.y0+i.y1)/2),function(e,t,a,r,n){switch(n){case"center":a=r=0;break;case"bottom":a=0,r=1;break;case"right":a=1,r=0;break;case"left":a=-1,r=0;break;case"top":a=0,r=-1;break;case"start":a=-a,r=-r;break;case"end":break;default:n*=Math.PI/180,a=Math.cos(n),r=Math.sin(n)}return{x:e,y:t,vx:a,vy:r}}(a,r,e.vx,e.vy,t.align)}var _=function(e,t){var a=(e.startAngle+e.endAngle)/2,r=Math.cos(a),n=Math.sin(a),i=e.innerRadius,o=e.outerRadius;return g({x0:e.x+r*i,y0:e.y+n*i,x1:e.x+r*o,y1:e.y+n*o,vx:r,vy:n},t)},k=function(e,t){var a=f(e,t.origin),r=a.x*e.options.radius,n=a.y*e.options.radius;return g({x0:e.x-r,y0:e.y-n,x1:e.x+r,y1:e.y+n,vx:a.x,vy:a.y},t)},w=function(e,t){var a=f(e,t.origin),r=e.x,n=e.y,i=0,o=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(n=Math.min(e.y,e.base),o=Math.abs(e.base-e.y)),g({x0:r,y0:n+o,x1:r+i,y1:n,vx:a.x,vy:a.y},t)},E=function(e,t){var a=f(e,t.origin);return g({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:a.x,vy:a.y},t)},M=function(e){return Math.round(e*s)/s};function C(e,t){var a=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!a)return null;if(void 0!==a.xCenter&&void 0!==a.yCenter)return{x:a.xCenter,y:a.yCenter};var r=a.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function S(e,t,a){var r=a.backgroundColor,n=a.borderColor,i=a.borderWidth;(r||n&&i)&&(e.beginPath(),function(e,t,a,r,n,i){var o=Math.PI/2;if(i){var l=Math.min(i,n/2,r/2),s=t+l,c=a+l,d=t+r-l,h=a+n-l;e.moveTo(t,c),s<d&&c<h?(e.arc(s,c,l,-Math.PI,-o),e.arc(d,c,l,-o,0),e.arc(d,h,l,0,o),e.arc(s,h,l,o,Math.PI)):s<d?(e.moveTo(s,a),e.arc(d,c,l,-o,o),e.arc(s,c,l,o,Math.PI+o)):c<h?(e.arc(s,c,l,-Math.PI,0),e.arc(s,h,l,0,Math.PI)):e.arc(s,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,a)}else e.rect(t,a,r,n)}(e,M(t.x)+i/2,M(t.y)+i/2,M(t.w)-i,M(t.h)-i,a.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),n&&i&&(e.strokeStyle=n,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function N(e,t,a){var r=e.shadowBlur,n=a.stroked,i=M(a.x),o=M(a.y),l=M(a.w);n&&e.strokeText(t,i,o,l),a.filled&&(r&&n&&(e.shadowBlur=0),e.fillText(t,i,o,l),r&&n&&(e.shadowBlur=r))}var A=function(e,t,a,r){var n=this;n._config=e,n._index=r,n._model=null,n._rects=null,n._ctx=t,n._el=a};(0,o.a4)(A.prototype,{_modelize:function(e,t,a,r){var n,i=this,s=i._index,c=(0,o.a0)((0,o.a)([a.font,{}],r,s)),h=(0,o.a)([a.color,o.d.color],r,s);return{align:(0,o.a)([a.align,"center"],r,s),anchor:(0,o.a)([a.anchor,"center"],r,s),area:r.chart.chartArea,backgroundColor:(0,o.a)([a.backgroundColor,null],r,s),borderColor:(0,o.a)([a.borderColor,null],r,s),borderRadius:(0,o.a)([a.borderRadius,0],r,s),borderWidth:(0,o.a)([a.borderWidth,0],r,s),clamp:(0,o.a)([a.clamp,!1],r,s),clip:(0,o.a)([a.clip,!1],r,s),color:h,display:e,font:c,lines:t,offset:(0,o.a)([a.offset,4],r,s),opacity:(0,o.a)([a.opacity,1],r,s),origin:C(i._el,r),padding:(0,o.E)((0,o.a)([a.padding,4],r,s)),positioner:(n=i._el,n instanceof l.Bs?_:n instanceof l.FN?k:n instanceof l.E8?w:E),rotation:(0,o.a)([a.rotation,0],r,s)*(Math.PI/180),size:d(i._ctx,t,c),textAlign:(0,o.a)([a.textAlign,"start"],r,s),textShadowBlur:(0,o.a)([a.textShadowBlur,0],r,s),textShadowColor:(0,o.a)([a.textShadowColor,h],r,s),textStrokeColor:(0,o.a)([a.textStrokeColor,h],r,s),textStrokeWidth:(0,o.a)([a.textStrokeWidth,0],r,s)}},update:function(e){var t,a,r,n=this,i=null,l=null,s=n._index,d=n._config,h=(0,o.a)([d.display,!0],e,s);h&&(t=e.dataset.data[s],a=(0,o.v)((0,o.Q)(d.formatter,[t,e]),t),(r=(0,o.k)(a)?[]:c(a)).length&&(l=function(e){var t=e.borderWidth||0,a=e.padding,r=e.size.height,n=e.size.width,i=-n/2,o=-r/2;return{frame:{x:i-a.left-t,y:o-a.top-t,w:n+a.width+2*t,h:r+a.height+2*t},text:{x:i,y:o,w:n,h:r}}}(i=n._modelize(h,r,d,e)))),n._model=i,n._rects=l},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var a,r=e.ctx,n=this._model,i=this._rects;this.visible()&&(r.save(),n.clip&&(a=n.area,r.beginPath(),r.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),r.clip()),r.globalAlpha=h(0,n.opacity,1),r.translate(M(t.x),M(t.y)),r.rotate(n.rotation),S(r,i.frame,n),function(e,t,a,r){var n,i=r.textAlign,o=r.color,l=!!o,s=r.font,c=t.length,d=r.textStrokeColor,h=r.textStrokeWidth,u=d&&h;if(c&&(l||u))for(a=function(e,t,a){var r=a.lineHeight,n=e.w,i=e.x;return"center"===t?i+=n/2:"end"!==t&&"right"!==t||(i+=n),{h:r,w:n,x:i,y:e.y+r/2}}(a,i,s),e.font=s.string,e.textAlign=i,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,l&&(e.fillStyle=o),u&&(e.lineJoin="round",e.lineWidth=h,e.strokeStyle=d),n=0,c=t.length;n<c;++n)N(e,t[n],{stroked:u,filled:l,w:a.w,x:a.x,y:a.y+a.h*n})}(r,n.lines,i.text,n),r.restore())}});var P=Number.MIN_SAFE_INTEGER||-9007199254740991,W=Number.MAX_SAFE_INTEGER||9007199254740991;function I(e,t,a){var r=Math.cos(a),n=Math.sin(a),i=t.x,o=t.y;return{x:i+r*(e.x-i)-n*(e.y-o),y:o+n*(e.x-i)+r*(e.y-o)}}function $(e,t){var a,r,n,i,o,l=W,s=P,c=t.origin;for(a=0;a<e.length;++a)n=(r=e[a]).x-c.x,i=r.y-c.y,o=t.vx*n+t.vy*i,l=Math.min(l,o),s=Math.max(s,o);return{min:l,max:s}}function F(e,t){var a=t.x-e.x,r=t.y-e.y,n=Math.sqrt(a*a+r*r);return{vx:(t.x-e.x)/n,vy:(t.y-e.y)/n,origin:e,ln:n}}var T=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function R(e,t,a){var r=t.positioner(e,t),n=r.vx,i=r.vy;if(!n&&!i)return{x:r.x,y:r.y};var o=a.w,l=a.h,s=t.rotation,c=Math.abs(o/2*Math.cos(s))+Math.abs(l/2*Math.sin(s)),d=Math.abs(o/2*Math.sin(s))+Math.abs(l/2*Math.cos(s)),h=1/Math.max(Math.abs(n),Math.abs(i));return c*=n*h,d*=i*h,c+=t.offset*n,d+=t.offset*i,{x:r.x+c,y:r.y+d}}(0,o.a4)(T.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,a){this._rotation=a,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,a=t._rect;return!((e=I(e,t.center(),-t._rotation)).x<a.x-1||e.y<a.y-1||e.x>a.x+a.w+2||e.y>a.y+a.h+2)},intersects:function(e){var t,a,r,n=this._points(),i=e._points(),o=[F(n[0],n[1]),F(n[0],n[3])];for(this._rotation!==e._rotation&&o.push(F(i[0],i[1]),F(i[0],i[3])),t=0;t<o.length;++t)if(a=$(n,o[t]),r=$(i,o[t]),a.max<r.min||r.max<a.min)return!1;return!0},_points:function(){var e=this,t=e._rect,a=e._rotation,r=e.center();return[I({x:t.x,y:t.y},r,a),I({x:t.x+t.w,y:t.y},r,a),I({x:t.x+t.w,y:t.y+t.h},r,a),I({x:t.x,y:t.y+t.h},r,a)]}});var B={prepare:function(e){var t,a,r,n,i,o=[];for(t=0,r=e.length;t<r;++t)for(a=0,n=e[t].length;a<n;++a)i=e[t][a],o.push(i),i.$layout={_box:new T,_hidable:!1,_visible:!0,_set:t,_idx:i._index};return o.sort((function(e,t){var a=e.$layout,r=t.$layout;return a._idx===r._idx?r._set-a._set:r._idx-a._idx})),this.update(o),o},update:function(e){var t,a,r,n,i,o=!1;for(t=0,a=e.length;t<a;++t)n=(r=e[t]).model(),(i=r.$layout)._hidable=n&&"auto"===n.display,i._visible=r.visible(),o|=i._hidable;o&&function(e){var t,a,r,n,i,o,l;for(t=0,a=e.length;t<a;++t)(n=(r=e[t]).$layout)._visible&&(l=new Proxy(r._el,{get:(e,t)=>e.getProps([t],!0)[t]}),i=r.geometry(),o=R(l,r.model(),i),n._box.update(o,i,r.rotation()));(function(e,t){var a,r,n,i;for(a=e.length-1;a>=0;--a)for(n=e[a].$layout,r=a-1;r>=0&&n._visible;--r)(i=e[r].$layout)._visible&&n._box.intersects(i._box)&&t(n,i)})(e,(function(e,t){var a=e._hidable,r=t._hidable;a&&r||r?t._visible=!1:a&&(e._visible=!1)}))}(e)},lookup:function(e,t){var a,r;for(a=e.length-1;a>=0;--a)if((r=e[a].$layout)&&r._visible&&r._box.contains(t))return e[a];return null},draw:function(e,t){var a,r,n,i,o,l;for(a=0,r=t.length;a<r;++a)(i=(n=t[a]).$layout)._visible&&(o=n.geometry(),l=R(n._el,n.model(),o),i._box.update(l,o,n.rotation()),n.draw(e,l))}},D="$datalabels",O="$default";function H(e,t,a,r){if(t){var n,i=a.$context,l=a.$groups;t[l._set]&&(n=t[l._set][l._key])&&!0===(0,o.Q)(n,[i,r])&&(e[D]._dirty=!0,a.update(i))}}function L(e,t){var a,r,n=e[D],i=n._listeners;if(i.enter||i.leave){if("mousemove"===t.type)r=B.lookup(n._labels,t);else if("mouseout"!==t.type)return;a=n._hovered,n._hovered=r,function(e,t,a,r,n){var i,o;(a||r)&&(a?r?a!==r&&(o=i=!0):o=!0:i=!0,o&&H(e,t.leave,a,n),i&&H(e,t.enter,r,n))}(e,i,a,r,t)}}var V={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if((0,o.k)(e))return null;var t,a,r,n=e;if((0,o.i)(e))if((0,o.k)(e.label))if((0,o.k)(e.r))for(n="",r=0,a=(t=Object.keys(e)).length;r<a;++r)n+=(0!==r?", ":"")+t[r]+": "+e[t[r]];else n=e.r;else n=e.label;return""+n},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(e){e[D]={_actives:[]}},beforeUpdate:function(e){var t=e[D];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,a){var r,n,i,l,s,c,d,h,u=t.index,f=e[D],m=f._datasets[u]=[],y=e.isDatasetVisible(u),v=e.data.datasets[u],b=function(e,t){var a,r,n,i=e.datalabels,l=[];return!1===i?null:(!0===i&&(i={}),t=(0,o.a4)({},[t,i]),r=t.labels||{},n=Object.keys(r),delete t.labels,n.length?n.forEach((function(e){r[e]&&l.push((0,o.a4)({},[t,r[e],{_key:e}]))})):l.push(t),a=l.reduce((function(e,t){return(0,o.F)(t.listeners||{},(function(a,r){e[r]=e[r]||{},e[r][t._key||O]=a})),delete t.listeners,e}),{}),{labels:l,listeners:a})}(v,a),p=t.meta.data||[],x=e.ctx;for(x.save(),r=0,i=p.length;r<i;++r)if((d=p[r])[D]=[],y&&d&&e.getDataVisibility(r)&&!d.skip)for(n=0,l=b.labels.length;n<l;++n)c=(s=b.labels[n])._key,(h=new A(s,x,d,r)).$groups={_set:u,_key:c||O},h.$context={active:!1,chart:e,dataIndex:r,dataset:v,datasetIndex:u},h.update(h.$context),d[D].push(h),m.push(h);x.restore(),(0,o.a4)(f._listeners,b.listeners,{merger:function(e,a,r){a[e]=a[e]||{},a[e][t.index]=r[e],f._listened=!0}})},afterUpdate:function(e){e[D]._labels=B.prepare(e[D]._datasets)},afterDatasetsDraw:function(e){B.draw(e,e[D]._labels)},beforeEvent:function(e,t){if(e[D]._listened){var a=t.event;switch(a.type){case"mousemove":case"mouseout":L(e,a);break;case"click":!function(e,t){var a=e[D],r=a._listeners.click,n=r&&B.lookup(a._labels,t);n&&H(e,r,n,t)}(e,a)}}},afterEvent:function(e){var t,a,r,n,i,o,l,s=e[D],c=s._actives,d=s._actives=e.getActiveElements(),h=u(c,d);for(t=0,a=h.length;t<a;++t)if((i=h[t])[1])for(r=0,n=(l=i[0].element[D]||[]).length;r<n;++r)(o=l[r]).$context.active=1===i[1],o.update(o.$context);(s._dirty||h.length)&&(B.update(s._labels),e.render()),delete s._dirty}},z=a(96540),j=a(44731);const G={pageWidth:"pageWidth_fKS3"};function U(){const[e,t]=(0,z.useState)({}),[a,o]=(0,z.useState)(n.c.Loading),[l,s]=(0,z.useState)(!1);async function c(){try{const e=await fetch("http://localhost:8080/v1/charts/parking-stats");t((await e.json()).results),s(!0)}catch(e){o(n.c.Failed),s(!1)}}return(0,z.useEffect)((()=>{c()}),[]),z.createElement(r.A,{title:"Parking Statistics",subCategory:"Transport"},z.createElement(i.A,{as:"h1"},"Parking Statistics"),z.createElement("div",{className:G.pageWidth},z.createElement(Y,{data:e?.availabilityThisYear,state:a,setState:o,loaded:l,onRetry:c})))}function Y(e){let{data:t,loaded:a,state:r,setState:i,onRetry:o}=e;const[l,s]=(0,z.useState)({}),[c,d]=(0,z.useState)(""),[h,u]=(0,z.useState)([]);return(0,z.useEffect)((()=>{if(a&&t?.length){const e=Array.from(new Set(t.map((e=>e.name))));u(e),!c&&e.length>0&&d(e[0])}}),[a,t]),(0,z.useEffect)((()=>{if(a&&t?.length&&c){const e=t.filter((e=>e.name===c));e.sort(((e,t)=>e.year-t.year||e.month-t.month));const a=e.map((e=>`${e.month}/${e.year}`)),r=e.map((e=>e.availabilityPercentage));s({labels:a,datasets:[{label:c,data:r,backgroundColor:"rgba(54, 162, 235, 0.7)"}]}),i(n.c.Loaded)}}),[a,t,c]),z.createElement("div",null,z.createElement("div",{style:{marginBottom:"1rem"}},z.createElement("label",{htmlFor:"carpark-select",style:{marginRight:"0.5rem"}},"Select Carpark:"),z.createElement("select",{id:"carpark-select",value:c,onChange:e=>d(e.target.value)},z.createElement("option",{value:""},"-- Select --"),h.map((e=>z.createElement("option",{key:e,value:e},e))))),z.createElement(n.A,{title:"Carpark Availability",state:r,onRetry:o},z.createElement(j.yP,{data:l,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Carpark Availability (%)"},datalabels:{anchor:"center",align:"center",color:"black",font:{weight:"bold"},formatter:e=>`${e}%`}},scales:{x:{title:{display:!0,text:"Month/Year"}},y:{title:{display:!0,text:"Availability %"},beginAtZero:!0,max:100}}}})))}l.t1.register(l.PP,l.kc,l.FN,l.No,l.E8,l.hE,l.m_,l.s$,V)}}]);