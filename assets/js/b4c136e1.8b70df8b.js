"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[868],{1963:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(6540),l=a(53),i=a(7559),o=a(1312);const r={admonition:"admonition_LlT9",admonitionHeading:"admonitionHeading_tbUL",admonitionIcon:"admonitionIcon_kALy",admonitionContent:"admonitionContent_S0QG"};const c={note:{infimaClassName:"secondary",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:n.createElement(o.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 12 16"},n.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:n.createElement(o.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 12 16"},n.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:n.createElement(o.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:n.createElement(o.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 16 16"},n.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:n.createElement(o.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},s={secondary:"note",important:"info",success:"tip",warning:"danger"};function m(e){const{mdxAdmonitionTitle:t,rest:a}=function(e){const t=n.Children.toArray(e),a=t.find((e=>n.isValidElement(e)&&"mdxAdmonitionTitle"===e.props?.mdxType)),l=n.createElement(n.Fragment,null,t.filter((e=>e!==a)));return{mdxAdmonitionTitle:a,rest:l}}(e.children);return{...e,title:e.title??t,children:a}}function p(e){const{children:t,type:a,title:o,icon:p}=m(e),d=function(e){const t=s[e]??e,a=c[t];return a||(console.warn(`No admonition config found for admonition type "${t}". Using Info as fallback.`),c.info)}(a),u=o??d.label,{iconComponent:E}=d,h=p??n.createElement(E,null);return n.createElement("div",{className:(0,l.A)(i.G.common.admonition,i.G.common.admonitionType(e.type),"alert",`alert--${d.infimaClassName}`,r.admonition)},n.createElement("div",{className:r.admonitionHeading},n.createElement("span",{className:r.admonitionIcon},h),u),n.createElement("div",{className:r.admonitionContent},t))}},8976:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(8168),l=a(6540),i=a(7330),o=a(8272);function r(e){const[t,a]=(0,l.useState)(e.initialViewport),[r,c]=(0,l.useState)(null);return l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(i.Ay,(0,n.A)({},t,{mapStyle:"mapbox://styles/mapbox/streets-v11",onViewportChange:e=>a(e),mapboxApiAccessToken:o.R}),l.createElement(i.ov,{showZoom:!0,style:{padding:"20px",zIndex:1e4}}),e.locations.map(((t,a)=>l.createElement(i.pH,(0,n.A)({key:a,latitude:Number(t.latitude),longitude:Number(t.longitude),onClick:()=>c(t)},e.markerProps),e.marker(t)))),e.popup&&r&&l.createElement(i.zD,(0,n.A)({latitude:r.latitude,longitude:r.longitude,onClose:()=>c(null),className:"mapbox-popup"},e.popupProps),e.popup(r))))}const c={loadingWrapper:"loadingWrapper_rIiJ",error:"error_nEoF"};function s(e){const[t,a]=(0,l.useState)([]),[i,o]=(0,l.useState)("loading");return(0,l.useEffect)((()=>{e.item.fetchData().then((e=>{a(e),o("loaded")})).catch((e=>o("failed")))}),[]),"loading"===i?l.createElement("div",{className:c.loadingWrapper},l.createElement("p",null,"Loading...")):"failed"===i?l.createElement("div",{className:c.loadingWrapper},l.createElement("p",null,"Failed to load map data")):l.createElement(l.Fragment,null,l.createElement("div",{className:c.error},"The map is currently down as we are experiencing issues with our mapbox account"),l.createElement(r,(0,n.A)({initialViewport:{width:"100%",height:"400px",latitude:49.214198,longitude:-2.132497,zoom:11},locations:t,marker:t=>e.item.icon(t),popup:t=>e.item.popup(t)},e)))}},242:(e,t,a)=>{a.d(t,{Z:()=>x});var n=a(6540);const l="popup_P_2S",i="popupName_aI73";function o(e){let{location:t}=e;return n.createElement("div",{className:l},n.createElement("p",{className:i},t.name))}const r="popup_5RKj",c="popupName_ihZz",s="servicesName_d1ic",m="services_M2AE";var p=a(3925);function d(e){let{location:t}=e;return n.createElement("div",{className:r},n.createElement("p",{className:c},t.location),n.createElement("p",{className:s},"Services:"),n.createElement("ul",{className:m},t.services.map((e=>n.createElement("li",null,(e=>{switch(e){case p.d.MIXED_TEXTILES:return"Mixed Textiles";case p.d.BATTERIES:return"Batteries";case p.d.CARDBOARD:return"Cardboard";case p.d.METAL_PACKAGING:return"Metal Packaging";case p.d.METAL_PACKAGING_DRINK_CANS:return"Drink Cans";case p.d.PAPER:return"Paper";case p.d.PLASTIC_BOTTLES:return"Plastic Bottles";case p.d.GLASS:return"Glass"}return"Unknown"})(e))))))}function u(e){let{location:t}=e;const[a,l]=(0,n.useState)("transparent"),[i,o]=(0,n.useState)(!1),r={border:"2px solid",borderColor:a,height:"25px"};return(0,n.useEffect)((()=>{null!==t.owner?.id&&(o(!0),"6060f60d-17a1-49c8-aa4a-c268721a806a"===t.owner.id&&l("red"),"62a13258-686c-456c-87f3-8a93ff735d35"===t.owner.id&&l("blue"),"52c49647-20f2-49f0-b9b6-a9ba49a13d03"===t.owner.id&&l("orange"))}),[t]),n.createElement("div",{style:i?r:{}},n.createElement("img",{src:"/img/maps/toilet.png",height:"20",width:"20"}))}function E(e){let{location:t}=e;return n.createElement("img",{src:"/img/maps/recycling.png",height:"20",width:"20"})}function h(e){let{location:t}=e;return n.createElement("img",{src:`/img/maps/eatsafe-${t.rating}.png`,height:"20",width:"20",style:{backgroundColor:"white",borderRadius:"50%"}})}const g={popup:"popup_YQy9",popupName:"popupName_U7DZ",popupType:"popupType_kaXW",popupList:"popupList_RGla",facilitiesWrapper:"facilitiesWrapper_vcKX",facility:"facility_z7_y",popupParish:"popupParish_IEy8",toiletGrid:"toiletGrid_keSm",toiletItem:"toiletItem_Sap9",ownedBy:"ownedBy_yMNL"};function f(e){let{location:t}=e;const a=n.createElement("span",{style:{color:"red"}},"N/A");return n.createElement("div",{className:g.popup},n.createElement("p",{className:g.popupName},t.name),n.createElement("p",{className:g.popupParish},t.parish," ",t.buildDate&&`| Built in ${t.buildDate}`),n.createElement("div",{className:g.facilitiesWrapper},t.facilities.map((e=>n.createElement("p",{className:g.facility},e)))),n.createElement("div",{className:g.toiletGrid},n.createElement("div",{className:g.maleToilet},n.createElement("strong",null,"Male"),t.male?n.createElement(n.Fragment,null,n.createElement("p",{className:g.toiletItem},"Cubicles: ",t.male.cubicles??a),n.createElement("p",{className:g.toiletItem},"Urinals: ",t.male.urinales??a),n.createElement("p",{className:g.toiletItem},"Hand Dryers: ",t.male.handDryers??a),n.createElement("p",{className:g.toiletItem},"Sinks: ",t.male.sinks??a)):n.createElement("p",null,"No male toilets")),n.createElement("div",{className:g.femaleToilet},n.createElement("strong",null,"Female"),t.female?n.createElement(n.Fragment,null,n.createElement("p",{className:g.toiletItem},"Cubicles: ",t.female.cubicles??a),n.createElement("p",{className:g.toiletItem},"Hand Dryers: ",t.female.handDryers??a),n.createElement("p",{className:g.toiletItem},"Sinks: ",t.female.sinks??a)):n.createElement("p",null,"No female toilets")),t.owner&&n.createElement("p",{className:g.ownedBy},"Owned by ",t.owner.name)))}function N(e){let{location:t}=e;return n.createElement("img",{src:"/img/maps/defib.png",height:"20",width:"20"})}const b="popup_v_lW",y="popupAddress_O2pV",A="popupParish_EZZs",S="popupPadNumber_VObk",v="popupNotes_kSdB";function w(e){let{location:t}=e;return n.createElement("div",{className:b},n.createElement("p",{className:y},t.address),n.createElement("p",{className:A},t.parish),n.createElement("p",{className:S},t.padNumber),t.notes&&n.createElement("p",{className:v},t.notes))}function C(e){let{location:t}=e;return n.createElement("img",{src:t.shelter?"/img/maps/bus-stop-yellow.png":"/img/maps/bus-stop.png",height:"20",width:"20"})}const _="popup_mXuE",k="popupName_azMX";function T(e){let{location:t}=e;return n.createElement("div",{className:_},n.createElement("p",{className:k},t.name))}function I(e){let{location:t}=e;return n.createElement("img",{src:"/img/maps/carpark.png",height:"20",width:"20"})}const D="popup_oaBH",L="popupName_jxds",B="popupType_pGU4",P="popupList_pjIE";function R(e){let{location:t}=e;return n.createElement("div",{className:D},n.createElement("p",{className:L},t.name),n.createElement("p",{className:B},(()=>{switch(t.type){case"LONG_STAY":return"Long Stay";case"SHORT_STAY":return"Short Stay";case"UNKNOWN":return"Unknown"}return t.type})()),n.createElement("ul",{className:P},n.createElement("li",null,n.createElement("strong",null,"Surface: "),t.surfaceType),n.createElement("li",null,n.createElement("strong",null,"Spaces:")," ",t.spaces),n.createElement("li",null,n.createElement("strong",null,"Disabled Spaces:")," ",t.disabledSpaces),n.createElement("li",null,n.createElement("strong",null,"Parent/Child Spaces:")," ",t.parentChildSpaces),n.createElement("li",null,n.createElement("strong",null,"Electric Charging Spaces:")," ",t.electricChargingSpaces)))}const x={eatsafe:{label:"Eatsafe ratings",icon:e=>n.createElement(h,{location:e}),popup:e=>n.createElement(o,{location:e}),fetchData:()=>M("eatsafe")},recycling:{label:"Recycling centres",icon:e=>n.createElement(E,{location:e}),popup:e=>n.createElement(d,{location:e}),fetchData:()=>M("recycling")},toilet:{label:"Public toilets",icon:e=>n.createElement(u,{location:e}),popup:e=>n.createElement(f,{location:e}),fetchData:()=>M("toilets")},defib:{label:"Defibrillators",icon:e=>n.createElement(N,{location:e}),popup:e=>n.createElement(w,{location:e}),fetchData:()=>M("defibrillators")},busStop:{label:"Bus stops",icon:e=>n.createElement(C,{location:e}),popup:e=>n.createElement(T,{location:e}),fetchData:()=>M("bus/stops")},carpark:{label:"Car parks",icon:e=>n.createElement(I,{location:e}),popup:e=>n.createElement(R,{location:e}),fetchData:()=>M("carparks")}};async function M(e){try{const t="https://data-api.glitch.je/v1",a=await fetch(`${t}/${e}`);if(!a.ok)throw new Error("Response was not ok");const n=await a.json();return n?.results}catch(t){throw console.error(`Failed to fetch data for route ${e}: ${t.message}`),t}}},3925:(e,t,a)=>{a.d(t,{d:()=>n});let n=function(e){return e.BATTERIES="BATTERIES",e.CARDBOARD="CARDBOARD",e.METAL_PACKAGING="METAL_PACKAGING",e.METAL_PACKAGING_DRINK_CANS="METAL_PACKAGING_DRINK_CANS",e.MIXED_TEXTILES="MIXED_TEXTILES",e.PAPER="PAPER",e.PLASTIC_BOTTLES="PLASTIC_BOTTLES",e.GLASS="GLASS",e}({})},284:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(6540),l=a(4586),i=a(5549),o=a(1963),r=a(53);const c={container:"container_OoCm",sectionTitle:"sectionTitle_c3gX",parkingSpacesDates:"parkingSpacesDates_S8JW",parkingSpaceDateItem:"parkingSpaceDateItem_ZgHW",failedLoadingSpaces:"failedLoadingSpaces_yjj_"};var s=a(4731),m=a(2022),p=a(242),d=a(8976);function u(){const{siteConfig:e}=(0,l.A)(),[t,a]=(0,n.useState)([]),[m,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(""!==u){N();let e=setInterval((()=>N()),5e3);return()=>clearInterval(e)}}),[u]),(0,n.useEffect)((()=>{b()}),[]),(0,n.useEffect)((()=>{0!==m.length&&h(m[0])}),[m]);const N=async()=>{f(!1);try{const e=await fetch(`https://data-api.glitch.je/v1/carparks/test-spaces?date=${u}`);a((await e.json()).reverse())}catch(e){console.error("Error fetching carpark spaces:",e),f(!0)}},b=async()=>{f(!1);try{const e=await fetch("https://data-api.glitch.je/v1/carparks/live-spaces/dates");d((await e.json()).results.reverse())}catch(e){console.error("Error fetching carpark spaces:",e),f(!0)}},y=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return n.createElement(i.A,{title:"Examples",description:"Examples of using the data"},n.createElement("main",{className:(0,r.A)("container",c.container)},n.createElement("section",null,n.createElement("h2",{className:c.sectionTitle},"Parking spaces over time"),n.createElement("p",null,"Click a date below to view the spaces on that day."),g?n.createElement("div",{className:c.failedLoadingSpaces},n.createElement("p",null,"Failed to load carpark spaces"),n.createElement("button",{onClick:()=>b()},"Retry")):n.createElement(n.Fragment,null,n.createElement("div",{className:c.parkingSpacesDates},m.map((e=>n.createElement("div",{key:e,className:c.parkingSpaceDateItem,style:{backgroundColor:e===u?"black":"#ececec",color:e===u?"white":"black"},onClick:()=>h(e)},n.createElement("span",null,new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"})))))),!!u&&n.createElement("p",{style:{marginTop:"10px",marginBottom:0}},"Showing ",new Date(u).toDateString()),n.createElement(s.N1,{data:(()=>{const e=t.reduce(((e,t)=>{const{name:a,createdAt:n,spaces:l}=t;return e[a]||(e[a]=[]),e[a].push({createdAt:n,spaces:l}),e}),{}),a=Object.keys(e).map((t=>({label:t,data:e[t].map((e=>e.spaces)),borderColor:y(),backgroundColor:"rgba(0,0,0,0)"})));return{labels:Array.from(new Set(t.map((e=>new Date(e.createdAt).toLocaleTimeString())))),datasets:a}})(),options:{plugins:{title:{display:!0,position:"top"},legend:{display:!0,position:"top"},tooltip:{mode:"point",intersect:!1}}}}))),n.createElement(E,{title:"Public Access Defibrillators",item:p.Z.defib},n.createElement("p",null,"Below is all the public access defibrillators around the island. Click on a ",n.createElement("img",{src:"/img/maps/defib.png",height:"15",width:"15"})," icon for more information about that location.")),n.createElement(E,{title:"Car parks",item:p.Z.carpark},n.createElement("p",null,"Below is all the public carparks around the island. Click on a ",n.createElement("img",{src:"/img/maps/carpark.png",height:"15",width:"15"})," icon for more information about that location.")),n.createElement(E,{title:"Recycling centres",item:p.Z.recycling},n.createElement("p",null,"Below is all the recycling centres around the island. Click on a ",n.createElement("img",{src:"/img/maps/recycling.png",height:"15",width:"15"})," icon for more information about that location."),n.createElement(o.A,{type:"tip",title:"Please note"},"Locations are approximate and just refer to the general area")),n.createElement(E,{title:"Public toilets",item:p.Z.toilet},n.createElement("p",null,"Below is all the public toilets around the island. Click on a ",n.createElement("img",{src:"/img/maps/toilet.png",height:"15",width:"15"})," icon for more information about that location.")),n.createElement(E,{title:"Bus stops",item:p.Z.busStop},n.createElement("p",null,"Below is all the bus stops around the island. Click on a ",n.createElement("img",{src:"/img/maps/bus-stop.png",height:"15",width:"15"})," icon for more information about that location.")),n.createElement(E,{title:"Eatsafe ratings",item:p.Z.eatsafe},n.createElement("p",null,"Below is all the businesses with eatsafe ratings around the island. Click on a rating icon for more information about that location."),n.createElement("p",null,"NOTE: Not all businesses have addresses specified and as such are not displayed here."))))}function E(e){return n.createElement("section",{style:{marginTop:"50px"}},n.createElement("h2",{className:c.sectionTitle},e.title),e.children,n.createElement(d.A,{item:e.item}))}m.t1.register(m.PP,m.kc,m.FN,m.No,m.UA,m.hE,m.m_,m.s$)},8272:e=>{e.exports=JSON.parse('{"R":"pk.eyJ1IjoibHVrZWVleWRldiIsImEiOiJjbHI4cjV3MGswYjYzMmp0M3lnaGllcHZhIn0.rBFyu08FWcUHQ2S7YSN0zg","y":"https://data-api.glitch.je/v1"}')}}]);