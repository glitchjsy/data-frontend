"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[577],{7861:(e,t,a)=>{a.d(t,{Z:()=>R});var l=a(6540);const n="popup_P_2S",i="popupName_aI73";function c(e){let{location:t}=e;return l.createElement("div",{className:n},l.createElement("p",{className:i},t.name))}const s="popup_5RKj",r="popupName_ihZz";function o(e){let{location:t}=e;return l.createElement("div",{className:s},l.createElement("p",{className:r},t.name))}function p(e){let{location:t}=e;const[a,n]=(0,l.useState)("transparent"),[i,c]=(0,l.useState)(!1),s={border:"2px solid",borderColor:a,height:"25px"};return(0,l.useEffect)((()=>{null!==t.owner?.id&&(c(!0),"6060f60d-17a1-49c8-aa4a-c268721a806a"===t.owner.id&&n("red"),"62a13258-686c-456c-87f3-8a93ff735d35"===t.owner.id&&n("blue"),"52c49647-20f2-49f0-b9b6-a9ba49a13d03"===t.owner.id&&n("orange"))}),[t]),l.createElement("div",{style:i?s:{}},l.createElement("img",{src:"/img/maps/toilet.png",height:"20",width:"20"}))}function m(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/recycling.png",height:"20",width:"20"})}function u(e){let{location:t}=e;return l.createElement("img",{src:`/img/maps/eatsafe-${t.rating}.png`,height:"20",width:"20",style:{backgroundColor:"white",borderRadius:"50%"}})}const d={popup:"popup_YQy9",popupName:"popupName_U7DZ",popupType:"popupType_kaXW",popupList:"popupList_RGla",facilitiesWrapper:"facilitiesWrapper_vcKX",facility:"facility_z7_y",popupParish:"popupParish_IEy8",toiletGrid:"toiletGrid_keSm",toiletItem:"toiletItem_Sap9",ownedBy:"ownedBy_yMNL"};function E(e){let{location:t}=e;const a=l.createElement("span",{style:{color:"red"}},"N/A");return l.createElement("div",{className:d.popup},l.createElement("p",{className:d.popupName},t.name),l.createElement("p",{className:d.popupParish},t.parish," ",t.buildDate&&`| Built in ${t.buildDate}`),l.createElement("div",{className:d.facilitiesWrapper},t.facilities.map((e=>l.createElement("p",{className:d.facility},e)))),l.createElement("div",{className:d.toiletGrid},l.createElement("div",{className:d.maleToilet},l.createElement("strong",null,"Male"),t.male?l.createElement(l.Fragment,null,l.createElement("p",{className:d.toiletItem},"Cubicles: ",t.male.cubicles??a),l.createElement("p",{className:d.toiletItem},"Urinals: ",t.male.urinales??a),l.createElement("p",{className:d.toiletItem},"Hand Dryers: ",t.male.handDryers??a),l.createElement("p",{className:d.toiletItem},"Sinks: ",t.male.sinks??a)):l.createElement("p",null,"No male toilets")),l.createElement("div",{className:d.femaleToilet},l.createElement("strong",null,"Female"),t.female?l.createElement(l.Fragment,null,l.createElement("p",{className:d.toiletItem},"Cubicles: ",t.female.cubicles??a),l.createElement("p",{className:d.toiletItem},"Hand Dryers: ",t.female.handDryers??a),l.createElement("p",{className:d.toiletItem},"Sinks: ",t.female.sinks??a)):l.createElement("p",null,"No female toilets")),t.owner&&l.createElement("p",{className:d.ownedBy},"Owned by ",t.owner.name)))}function b(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/defib.png",height:"20",width:"20"})}const g="popup_v_lW",h="popupAddress_O2pV",N="popupParish_EZZs",f="popupPadNumber_VObk",S="popupNotes_kSdB";function y(e){let{location:t}=e;return l.createElement("div",{className:g},l.createElement("p",{className:h},t.address),l.createElement("p",{className:N},t.parish),l.createElement("p",{className:f},t.padNumber),t.notes&&l.createElement("p",{className:S},t.notes))}function k(e){let{location:t}=e;return l.createElement("img",{src:t.shelter?"/img/maps/bus-stop-yellow.png":"/img/maps/bus-stop.png",height:"20",width:"20"})}const _="popup_mXuE",C="popupName_azMX";function O(e){let{location:t}=e;return l.createElement("div",{className:_},l.createElement("p",{className:C},t.name))}function T(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/carpark.png",height:"20",width:"20"})}const v="popup_oaBH",A="popupName_jxds",w="popupType_pGU4",G="popupList_pjIE";function D(e){let{location:t}=e;return l.createElement("div",{className:v},l.createElement("p",{className:A},t.name),l.createElement("p",{className:w},(()=>{switch(t.type){case"LONG_STAY":return"Long Stay";case"SHORT_STAY":return"Short Stay";case"UNKNOWN":return"Unknown"}return t.type})()),l.createElement("ul",{className:G},l.createElement("li",null,l.createElement("strong",null,"Surface: "),t.surfaceType),l.createElement("li",null,l.createElement("strong",null,"Spaces:")," ",t.spaces),l.createElement("li",null,l.createElement("strong",null,"Disabled Spaces:")," ",t.disabledSpaces),l.createElement("li",null,l.createElement("strong",null,"Parent/Child Spaces:")," ",t.parentChildSpaces),l.createElement("li",null,l.createElement("strong",null,"Electric Charging Spaces:")," ",t.electricChargingSpaces)))}const R={eatsafe:{label:"Eatsafe ratings",icon:e=>l.createElement(u,{location:e}),popup:e=>l.createElement(c,{location:e}),fetchData:()=>B("eatsafe")},recycling:{label:"Recycling centres",icon:e=>l.createElement(m,{location:e}),popup:e=>l.createElement(o,{location:e}),fetchData:()=>B("recycling")},toilet:{label:"Public toilets",icon:e=>l.createElement(p,{location:e}),popup:e=>l.createElement(E,{location:e}),fetchData:()=>B("toilets")},defib:{label:"Defibrillators",icon:e=>l.createElement(b,{location:e}),popup:e=>l.createElement(y,{location:e}),fetchData:()=>B("defibrillators")},busStop:{label:"Bus stops",icon:e=>l.createElement(k,{location:e}),popup:e=>l.createElement(O,{location:e}),fetchData:()=>B("bus/stops")},carpark:{label:"Car parks",icon:e=>l.createElement(T,{location:e}),popup:e=>l.createElement(D,{location:e}),fetchData:()=>B("carparks")}};async function B(e){try{const t="https://data-api.glitch.je/v1",a=await fetch(`${t}/${e}`);if(!a.ok)throw new Error("Response was not ok");const l=await a.json();return l?.results}catch(t){throw console.error(`Failed to fetch data for route ${e}: ${t.message}`),t}}},228:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(8168),n=a(6540),i=a(7330),c=a(7861),s=a(5549);const r={grid:"grid__dFs",drawer:"drawer_Y40b",checkboxGroup:"checkboxGroup_KR_s",checkmark:"checkmark_T8Dv"},o={subOptions:"subOptions_b7XZ",subOptionOptions:"subOptionOptions_xGmD",subOptionSectionTitle:"subOptionSectionTitle_AFFO",subOptionGroup:"subOptionGroup_xlG5",checkmark:"checkmark_VkFL",checkboxGroup:"checkboxGroup_Tg19"};var p=a(53);function m(e){return n.createElement("div",{style:{borderBottom:"1px solid #ececec",paddingTop:"15px"}},n.createElement("label",{className:o.checkboxGroup},e.label,n.createElement("input",{type:"checkbox",checked:e.isVisible,onChange:e.toggleVisibility}),n.createElement("span",{className:o.checkmark})),e.isVisible&&e.subOptions?.length>0&&n.createElement("div",{className:o.subOptions},e.subOptions.map((e=>n.createElement("div",{className:o.subOptionSection},n.createElement("p",{className:o.subOptionSectionTitle},e.title),n.createElement("div",{className:o.subOptionOptions},e.options.map((e=>n.createElement("label",{key:e.value,className:(0,p.A)(o.checkboxGroup,o.subOptionGroup)},e.label,n.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:e.toggle}),n.createElement("span",{className:o.checkmark}))))))))))}var u=a(8272);let d=function(e){return e.SHORT_STAY="SHORT_STAY",e.LONG_STAY="LONG_STAY",e.UNKNOWN="UNKNOWN",e}({}),E=function(e){return e.TARMAC="TARMAC",e.CONCRETE="CONCRETE",e.GRAVEL="GRAVEL",e}({}),b=function(e){return e.GENDER_NEUTRAL="GENDER_NEUTRAL",e.BEACH_SHOWER="BEACH_SHOWER",e.BABY_CHANGING="BABY_CHANGING",e.DISABLED="DISABLED",e}({});function g(){const[e,t]=(0,n.useState)({width:"100%",height:"80vh",latitude:49.214198,longitude:-2.132497,zoom:11}),[a,o]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),[N,f]=(0,n.useState)(!0),[S,y]=(0,n.useState)(!0),[k,_]=(0,n.useState)(!0),[C,O]=(0,n.useState)(!0),[T,v]=(0,n.useState)(!0),[A,w]=(0,n.useState)(!0),[G,D]=(0,n.useState)(!1),[R,B]=(0,n.useState)(!0),[I,V]=(0,n.useState)(!0),[x,H]=(0,n.useState)(!0),[L,Z]=(0,n.useState)(!0),[Y,W]=(0,n.useState)(!0),[U,j]=(0,n.useState)(!1),[F,M]=(0,n.useState)(!1),[P,z]=(0,n.useState)(!1),[K,$]=(0,n.useState)(!1),[X,J]=(0,n.useState)([]),[Q,q]=(0,n.useState)([]),[ee,te]=(0,n.useState)([]),[ae,le]=(0,n.useState)([]),[ne,ie]=(0,n.useState)([]),[ce,se]=(0,n.useState)([]);(0,n.useEffect)((()=>{c.Z.carpark.fetchData().then(J),c.Z.toilet.fetchData().then(q),c.Z.busStop.fetchData().then(te),c.Z.recycling.fetchData().then(le),c.Z.defib.fetchData().then(ie),c.Z.eatsafe.fetchData().then(se)}),[]);return n.createElement(s.A,{title:"Map",description:"Interactive map example"},n.createElement("main",null,n.createElement("div",{className:r.grid},n.createElement("div",{className:r.drawer},n.createElement(m,{label:"Car parks",isVisible:p,toggleVisibility:()=>g(!p),subOptions:[{title:"Type",options:[{label:"Long Stay",value:"includeLongStayCarparks",isChecked:N,toggle:()=>f(!N)},{label:"Short Stay",value:"includeShortStayCarparks",isChecked:S,toggle:()=>y(!S)},{label:"Unknown",value:"includeUnknownCarparks",isChecked:k,toggle:()=>_(!k)}]},{title:"Surface",options:[{label:"Tarmac",value:"includeTarmacCarparks",isChecked:T,toggle:()=>v(!T)},{label:"Concrete",value:"includeConcreteCarparks",isChecked:A,toggle:()=>w(!A)},{label:"Gravel",value:"includeGravelCarparks",isChecked:C,toggle:()=>O(!C)}]}]}),n.createElement(m,{label:"Public toilets",isVisible:G,toggleVisibility:()=>D(!G),subOptions:[{title:"Facilities",options:[{label:"Gender Neutral",value:"includeGenderNeutralToilets",isChecked:R,toggle:()=>B(!R)},{label:"Beach Showers",value:"includeBeachShowerToilets",isChecked:I,toggle:()=>V(!I)},{label:"Baby Changing",value:"includeBabyChangingToilets",isChecked:x,toggle:()=>H(!x)},{label:"Disabled",value:"includeDisabledToilets",isChecked:L,toggle:()=>Z(!L)},{label:"None",value:"includeNoneToilets",isChecked:Y,toggle:()=>W(!Y)}]}]}),n.createElement(m,{label:"Bus stops",isVisible:U,toggleVisibility:()=>j(!U)}),n.createElement(m,{label:"Recycling centres",isVisible:F,toggleVisibility:()=>M(!F)}),n.createElement(m,{label:"Defibrillators",isVisible:P,toggleVisibility:()=>z(!P)}),n.createElement(m,{label:"Eat safe ratings",isVisible:K,toggleVisibility:()=>$(!K)})),n.createElement(i.Ay,(0,l.A)({},e,{mapStyle:"mapbox://styles/mapbox/streets-v11",onViewportChange:e=>t(e),mapboxApiAccessToken:u.R}),n.createElement(i.ov,{showZoom:!0,style:{padding:"20px",zIndex:1e4}}),p&&X.filter((e=>(N&&e.type===d.LONG_STAY||S&&e.type===d.SHORT_STAY||k&&e.type===d.UNKNOWN)&&(C&&e.surfaceType===E.GRAVEL||T&&e.surfaceType===E.TARMAC||A&&e.surfaceType===E.CONCRETE))).map(((e,t)=>n.createElement(h,{item:e,type:"carpark",onSelect:o}))),G&&Q.filter((e=>!(!Y&&0===e.facilities.length||!R&&e.facilities.includes(b.GENDER_NEUTRAL)||!I&&e.facilities.includes(b.BEACH_SHOWER)||!x&&e.facilities.includes(b.BABY_CHANGING)||!L&&e.facilities.includes(b.DISABLED)))).map(((e,t)=>n.createElement(h,{item:e,type:"toilet",onSelect:o}))),U&&ee.map(((e,t)=>n.createElement(h,{item:e,type:"busStop",onSelect:o}))),F&&ae.map(((e,t)=>n.createElement(h,{item:e,type:"recycling",onSelect:o}))),P&&ne.map(((e,t)=>n.createElement(h,{item:e,type:"defib",onSelect:o}))),K&&ce.map(((e,t)=>n.createElement(h,{item:e,type:"eatsafe",onSelect:o}))),a&&n.createElement(i.zD,{latitude:Number(a.item.latitude),longitude:Number(a.item.longitude),onClose:()=>o(null),closeOnClick:!1,anchor:"top"},c.Z[a.type].popup(a.item))))))}function h(e){let{item:t,type:a,onSelect:l}=e;return n.createElement(i.pH,{latitude:Number(t.latitude),longitude:Number(t.longitude)},n.createElement("div",{onClick:()=>l({item:t,type:a}),style:{cursor:"pointer"}},c.Z[a].icon(t)))}},8272:e=>{e.exports=JSON.parse('{"R":"pk.eyJ1IjoibHVrZWVleWRldiIsImEiOiJjbHI4cjV3MGswYjYzMmp0M3lnaGllcHZhIn0.rBFyu08FWcUHQ2S7YSN0zg"}')}}]);