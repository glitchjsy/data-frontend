"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[4577],{242:(e,t,a)=>{a.d(t,{Z:()=>x});var l=a(6540);const c="popup_P_2S",n="popupName_aI73";function i(e){let{location:t}=e;return l.createElement("div",{className:c},l.createElement("p",{className:n},t.name))}const s="popup_5RKj",r="popupName_ihZz",o="servicesName_d1ic",p="services_M2AE";var u=a(3925);function m(e){let{location:t}=e;return l.createElement("div",{className:s},l.createElement("p",{className:r},t.location),l.createElement("p",{className:o},"Services:"),l.createElement("ul",{className:p},t.services.map((e=>l.createElement("li",null,(e=>{switch(e){case u.d.MIXED_TEXTILES:return"Mixed Textiles";case u.d.BATTERIES:return"Batteries";case u.d.CARDBOARD:return"Cardboard";case u.d.METAL_PACKAGING:return"Metal Packaging";case u.d.METAL_PACKAGING_DRINK_CANS:return"Drink Cans";case u.d.PAPER:return"Paper";case u.d.PLASTIC_BOTTLES:return"Plastic Bottles";case u.d.GLASS:return"Glass"}return"Unknown"})(e))))))}function d(e){let{location:t}=e;const[a,c]=(0,l.useState)("transparent"),[n,i]=(0,l.useState)(!1),s={border:"2px solid",borderColor:a,height:"25px"};return(0,l.useEffect)((()=>{null!==t.owner?.id&&(i(!0),"6060f60d-17a1-49c8-aa4a-c268721a806a"===t.owner.id&&c("red"),"62a13258-686c-456c-87f3-8a93ff735d35"===t.owner.id&&c("blue"),"52c49647-20f2-49f0-b9b6-a9ba49a13d03"===t.owner.id&&c("orange"))}),[t]),l.createElement("div",{style:n?s:{}},l.createElement("img",{src:"/img/maps/toilet.png",height:"20",width:"20"}))}function E(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/recycling.png",height:"20",width:"20"})}function g(e){let{location:t}=e;return l.createElement("img",{src:`/img/maps/eatsafe-${t.rating}.png`,height:"20",width:"20",style:{backgroundColor:"white",borderRadius:"50%"}})}const b={popup:"popup_YQy9",popupName:"popupName_U7DZ",popupType:"popupType_kaXW",popupList:"popupList_RGla",facilitiesWrapper:"facilitiesWrapper_vcKX",facility:"facility_z7_y",popupParish:"popupParish_IEy8",toiletGrid:"toiletGrid_keSm",toiletItem:"toiletItem_Sap9",ownedBy:"ownedBy_yMNL"};function N(e){let{location:t}=e;const a=l.createElement("span",{style:{color:"red"}},"N/A");return l.createElement("div",{className:b.popup},l.createElement("p",{className:b.popupName},t.name),l.createElement("p",{className:b.popupParish},t.parish),l.createElement("div",{className:b.facilitiesWrapper},t.facilities.map((e=>l.createElement("p",{className:b.facility},e)))),l.createElement("div",{className:b.toiletGrid},l.createElement("div",{className:b.maleToilet},l.createElement("strong",null,"Male"),t.male?l.createElement(l.Fragment,null,l.createElement("p",{className:b.toiletItem},"Cubicles: ",t.male.cubicles??a),l.createElement("p",{className:b.toiletItem},"Urinals: ",t.male.urinales??a),l.createElement("p",{className:b.toiletItem},"Hand Dryers: ",t.male.handDryers??a),l.createElement("p",{className:b.toiletItem},"Sinks: ",t.male.sinks??a)):l.createElement("p",null,"No male toilets")),l.createElement("div",{className:b.femaleToilet},l.createElement("strong",null,"Female"),t.female?l.createElement(l.Fragment,null,l.createElement("p",{className:b.toiletItem},"Cubicles: ",t.female.cubicles??a),l.createElement("p",{className:b.toiletItem},"Hand Dryers: ",t.female.handDryers??a),l.createElement("p",{className:b.toiletItem},"Sinks: ",t.female.sinks??a)):l.createElement("p",null,"No female toilets")),t.owner&&l.createElement("p",{className:b.ownedBy},"Owned by ",t.owner.name)))}function S(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/defib.png",height:"20",width:"20"})}const h="popup_v_lW",A="address_t6cz",f="streetName_O8iS",_="parish_Rnx9",C="padNumberTitle_Eppp",y="padNumber_olf7",T="notes_RzPt";function k(e){let{location:t}=e;return l.createElement("div",{className:h},l.createElement("p",{className:A},t.address),l.createElement("p",{className:f},l.createElement("strong",null,"Street Name:")," ",t.streetName),l.createElement("p",{className:_},l.createElement("strong",null,"Parish:")," ",t.parish),l.createElement("p",{className:C},"Pad Number:"),l.createElement("p",{className:y},t.padNumber),t.notes&&l.createElement("p",{className:T},l.createElement("strong",null,"Notes:")," ",t.notes))}function v(e){let{location:t}=e;return l.createElement("img",{src:t.shelter?"/img/maps/bus-stop-yellow.png":"/img/maps/bus-stop.png",height:"20",width:"20"})}const G="popup_mXuE",R="popupName_azMX";function I(e){let{location:t}=e;return l.createElement("div",{className:G},l.createElement("p",{className:R},t.name))}function D(e){let{location:t}=e;return l.createElement("img",{src:"/img/maps/carpark.png",height:"20",width:"20"})}const O="popup_oaBH",L="popupName_jxds",w="popupType_pGU4",B="popupList_pjIE";function P(e){let{location:t}=e;return l.createElement("div",{className:O},l.createElement("p",{className:L},t.name),l.createElement("p",{className:w},(()=>{switch(t.type){case"LONG_STAY":return"Long Stay";case"SHORT_STAY":return"Short Stay";case"UNKNOWN":return"Unknown"}return t.type})()),l.createElement("ul",{className:B},l.createElement("li",null,l.createElement("strong",null,"Surface: "),t.surfaceType),l.createElement("li",null,l.createElement("strong",null,"Spaces:")," ",t.spaces),l.createElement("li",null,l.createElement("strong",null,"Disabled Spaces:")," ",t.disabledSpaces),l.createElement("li",null,l.createElement("strong",null,"Parent/Child Spaces:")," ",t.parentChildSpaces),l.createElement("li",null,l.createElement("strong",null,"Electric Charging Spaces:")," ",t.electricChargingSpaces)))}const x={eatsafe:{label:"Eatsafe ratings",icon:e=>l.createElement(g,{location:e}),popup:e=>l.createElement(i,{location:e}),fetchData:()=>M("eatsafe")},recycling:{label:"Recycling centres",icon:e=>l.createElement(E,{location:e}),popup:e=>l.createElement(m,{location:e}),fetchData:()=>M("recycling")},toilet:{label:"Public toilets",icon:e=>l.createElement(d,{location:e}),popup:e=>l.createElement(N,{location:e}),fetchData:()=>M("toilets")},defib:{label:"Defibrillators",icon:e=>l.createElement(S,{location:e}),popup:e=>l.createElement(k,{location:e}),fetchData:()=>M("defibrillators")},busStop:{label:"Bus stops",icon:e=>l.createElement(v,{location:e}),popup:e=>l.createElement(I,{location:e}),fetchData:()=>M("bus/stops")},carpark:{label:"Car parks",icon:e=>l.createElement(D,{location:e}),popup:e=>l.createElement(P,{location:e}),fetchData:()=>M("carparks")}};async function M(e){try{const t="http://localhost:8080/v1",a=await fetch(`${t}/${e}`);if(!a.ok)throw new Error("Response was not ok");const l=await a.json();return l?.results||l}catch(t){throw console.error(`Failed to fetch data for route ${e}: ${t.message}`),t}}},3925:(e,t,a)=>{a.d(t,{d:()=>l});let l=function(e){return e.BATTERIES="BATTERIES",e.CARDBOARD="CARDBOARD",e.METAL_PACKAGING="METAL_PACKAGING",e.METAL_PACKAGING_DRINK_CANS="METAL_PACKAGING_DRINK_CANS",e.MIXED_TEXTILES="MIXED_TEXTILES",e.PAPER="PAPER",e.PLASTIC_BOTTLES="PLASTIC_BOTTLES",e.GLASS="GLASS",e}({})},228:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(8168),c=a(6540),n=a(7330),i=a(242),s=a(5549);const r={grid:"grid__dFs",drawer:"drawer_Y40b",error:"error_pIoi",checkboxGroup:"checkboxGroup_KR_s",checkmark:"checkmark_T8Dv"},o={subOptions:"subOptions_b7XZ",subOptionOptions:"subOptionOptions_xGmD",subOptionSectionTitle:"subOptionSectionTitle_AFFO",subOptionGroup:"subOptionGroup_xlG5",checkmark:"checkmark_VkFL",checkboxGroup:"checkboxGroup_Tg19"};var p=a(53);function u(e){return c.createElement("div",{style:{borderBottom:"1px solid #ececec",paddingTop:"15px"}},c.createElement("label",{className:o.checkboxGroup},e.label,c.createElement("input",{type:"checkbox",checked:e.isVisible,onChange:e.toggleVisibility}),c.createElement("span",{className:o.checkmark})),e.isVisible&&e.subOptions?.length>0&&c.createElement("div",{className:o.subOptions},e.subOptions.map((e=>c.createElement("div",{className:o.subOptionSection},c.createElement("p",{className:o.subOptionSectionTitle},e.title),c.createElement("div",{className:o.subOptionOptions},e.options.map((e=>c.createElement("label",{key:e.value,className:(0,p.A)(o.checkboxGroup,o.subOptionGroup)},e.label,c.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:e.toggle}),c.createElement("span",{className:o.checkmark}))))))))))}var m=a(8272);let d=function(e){return e.SHORT_STAY="SHORT_STAY",e.LONG_STAY="LONG_STAY",e.UNKNOWN="UNKNOWN",e}({}),E=function(e){return e.TARMAC="TARMAC",e.CONCRETE="CONCRETE",e.GRAVEL="GRAVEL",e}({}),g=function(e){return e.GENDER_NEUTRAL="GENDER_NEUTRAL",e.BEACH_SHOWER="BEACH_SHOWER",e.BABY_CHANGING="BABY_CHANGING",e.DISABLED="DISABLED",e}({});var b=a(3925);function N(){const[e,t]=(0,c.useState)({width:"100%",height:"80vh",latitude:49.214198,longitude:-2.132497,zoom:11}),[a,o]=(0,c.useState)(null),[p,N]=(0,c.useState)(!1),[h,A]=(0,c.useState)(!0),[f,_]=(0,c.useState)(!0),[C,y]=(0,c.useState)(!0),[T,k]=(0,c.useState)(!0),[v,G]=(0,c.useState)(!0),[R,I]=(0,c.useState)(!0),[D,O]=(0,c.useState)(!1),[L,w]=(0,c.useState)(!0),[B,P]=(0,c.useState)(!0),[x,M]=(0,c.useState)(!0),[V,K]=(0,c.useState)(!0),[H,X]=(0,c.useState)(!0),[Z,U]=(0,c.useState)(!1),[Y,W]=(0,c.useState)(!0),[F,j]=(0,c.useState)(!0),[z,$]=(0,c.useState)(!0),[J,Q]=(0,c.useState)(!0),[q,ee]=(0,c.useState)(!0),[te,ae]=(0,c.useState)(!0),[le,ce]=(0,c.useState)(!0),[ne,ie]=(0,c.useState)(!0),[se,re]=(0,c.useState)(!1),[oe,pe]=(0,c.useState)(!1),[ue,me]=(0,c.useState)(!1),[de,Ee]=(0,c.useState)([]),[ge,be]=(0,c.useState)([]),[Ne,Se]=(0,c.useState)([]),[he,Ae]=(0,c.useState)([]),[fe,_e]=(0,c.useState)([]),[Ce,ye]=(0,c.useState)([]);(0,c.useEffect)((()=>{i.Z.carpark.fetchData().then(Ee),i.Z.toilet.fetchData().then(be),i.Z.busStop.fetchData().then(Se),i.Z.recycling.fetchData().then(Ae),i.Z.defib.fetchData().then(_e),i.Z.eatsafe.fetchData().then(ye)}),[]);return c.createElement(s.A,{title:"Map",description:"Interactive map example"},c.createElement("main",null,c.createElement("div",{className:r.grid},c.createElement("div",{className:r.drawer},c.createElement(u,{label:"Car parks",isVisible:p,toggleVisibility:()=>N(!p),subOptions:[{title:"Type",options:[{label:"Long Stay",value:"includeLongStayCarparks",isChecked:h,toggle:()=>A(!h)},{label:"Short Stay",value:"includeShortStayCarparks",isChecked:f,toggle:()=>_(!f)},{label:"Unknown",value:"includeUnknownCarparks",isChecked:C,toggle:()=>y(!C)}]},{title:"Surface",options:[{label:"Tarmac",value:"includeTarmacCarparks",isChecked:v,toggle:()=>G(!v)},{label:"Concrete",value:"includeConcreteCarparks",isChecked:R,toggle:()=>I(!R)},{label:"Gravel",value:"includeGravelCarparks",isChecked:T,toggle:()=>k(!T)}]}]}),c.createElement(u,{label:"Public toilets",isVisible:D,toggleVisibility:()=>O(!D),subOptions:[{title:"Facilities",options:[{label:"Gender Neutral",value:"includeGenderNeutralToilets",isChecked:L,toggle:()=>w(!L)},{label:"Beach Showers",value:"includeBeachShowerToilets",isChecked:B,toggle:()=>P(!B)},{label:"Baby Changing",value:"includeBabyChangingToilets",isChecked:x,toggle:()=>M(!x)},{label:"Disabled",value:"includeDisabledToilets",isChecked:V,toggle:()=>K(!V)},{label:"None",value:"includeNoneToilets",isChecked:H,toggle:()=>X(!H)}]}]}),c.createElement(u,{label:"Bus stops",isVisible:se,toggleVisibility:()=>re(!se)}),c.createElement(u,{label:"Recycling centres",isVisible:Z,toggleVisibility:()=>U(!Z),subOptions:[{title:"Services",options:[{label:"Mixed Textiles",value:"includeMixedTextilesRecycling",isChecked:Y,toggle:()=>W(!Y)},{label:"Batteries",value:"includeBatteriesRecycling",isChecked:F,toggle:()=>j(!F)},{label:"Cardboard",value:"includeCardboardRecycling",isChecked:z,toggle:()=>$(!z)},{label:"Metal Packaging",value:"includeMetalPackagingRecycling",isChecked:J,toggle:()=>Q(!J)},{label:"Drink Cans",value:"includeDrinkCansRecycling",isChecked:q,toggle:()=>ee(!q)},{label:"Paper",value:"includePaperRecycling",isChecked:te,toggle:()=>ae(!te)},{label:"Plastic Bottles",value:"includePlasticBottlesRecycling",isChecked:le,toggle:()=>ce(!le)},{label:"Glass",value:"includeGlassRecycling",isChecked:ne,toggle:()=>ie(!ne)}]}]}),c.createElement(u,{label:"Defibrillators",isVisible:oe,toggleVisibility:()=>pe(!oe)}),c.createElement(u,{label:"Eat safe ratings",isVisible:ue,toggleVisibility:()=>me(!ue)})),c.createElement(n.Ay,(0,l.A)({},e,{mapStyle:"mapbox://styles/mapbox/streets-v11",onViewportChange:e=>t(e),mapboxApiAccessToken:m.R}),c.createElement(n.ov,{showZoom:!0,style:{padding:"20px",zIndex:1e4}}),p&&de.filter((e=>(h&&e.type===d.LONG_STAY||f&&e.type===d.SHORT_STAY||C&&e.type===d.UNKNOWN)&&(T&&e.surfaceType===E.GRAVEL||v&&e.surfaceType===E.TARMAC||R&&e.surfaceType===E.CONCRETE))).map(((e,t)=>c.createElement(S,{item:e,type:"carpark",onSelect:o}))),D&&ge.filter((e=>!(!H&&0===e.facilities.length||!L&&e.facilities.includes(g.GENDER_NEUTRAL)||!B&&e.facilities.includes(g.BEACH_SHOWER)||!x&&e.facilities.includes(g.BABY_CHANGING)||!V&&e.facilities.includes(g.DISABLED)))).map(((e,t)=>c.createElement(S,{item:e,type:"toilet",onSelect:o}))),se&&Ne.map(((e,t)=>c.createElement(S,{item:e,type:"busStop",onSelect:o}))),Z&&he.filter((e=>!(!Y&&e.services.includes(b.d.MIXED_TEXTILES)||!F&&e.services.includes(b.d.BATTERIES)||!z&&e.services.includes(b.d.CARDBOARD)||!J&&e.services.includes(b.d.METAL_PACKAGING)||!q&&e.services.includes(b.d.METAL_PACKAGING_DRINK_CANS)||!te&&e.services.includes(b.d.PAPER)||!le&&e.services.includes(b.d.PLASTIC_BOTTLES)||!ne&&e.services.includes(b.d.GLASS)))).map(((e,t)=>c.createElement(S,{item:e,type:"recycling",onSelect:o}))),oe&&fe.map(((e,t)=>c.createElement(S,{item:e,type:"defib",onSelect:o}))),ue&&Ce.map(((e,t)=>c.createElement(S,{item:e,type:"eatsafe",onSelect:o}))),a&&c.createElement(n.zD,{latitude:Number(a.item.latitude),longitude:Number(a.item.longitude),onClose:()=>o(null),closeOnClick:!1,anchor:"top"},i.Z[a.type].popup(a.item))))))}function S(e){let{item:t,type:a,onSelect:l}=e;return c.createElement(n.pH,{latitude:Number(t.latitude),longitude:Number(t.longitude)},c.createElement("div",{onClick:()=>l({item:t,type:a}),style:{cursor:"pointer"}},i.Z[a].icon(t)))}},8272:e=>{e.exports=JSON.parse('{"R":"pk.eyJ1IjoiZ2xpdGNoanN5IiwiYSI6ImNtOG9iZm01aTAwcWQyanM5NHN6NXRsemcifQ.GCQil4JVppCX_dIgJE1tMA","y":"https://data-api.glitch.je/v1"}')}}]);