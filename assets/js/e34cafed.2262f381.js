"use strict";(self.webpackChunk_glitchjsy_data_frontend=self.webpackChunk_glitchjsy_data_frontend||[]).push([[238],{9483:(e,a,t)=>{t.d(a,{A:()=>b});var r=t(6540),s=t(2898),n=t(3551),c=t(7559),l=t(3975),i=t(53);const o=[{type:"link",label:"Charts Home",href:"/charts"},{type:"category",label:"Transport",items:[{type:"link",label:"Parking Spaces Over Time",href:"/charts/transport/parking-over-time"},{type:"link",label:"Vehicle Colours",href:"/charts/transport/vehicle-colors"},{type:"link",label:"Vehicle Makes",href:"/charts/transport/vehicle-makes"},{type:"link",label:"Bus Passengers Weekly",href:"/charts/transport/bus-passengers-weekly"},{type:"link",label:"Road Traffic",href:"/charts/transport/road-traffic"},{type:"link",label:"Driving Test Results",href:"/charts/transport/driving-test-results"}]}];function m(){return r.createElement("aside",{className:(0,i.A)(c.G.docs.docSidebarContainer,n.A.docSidebarContainer)},r.createElement(l.A,{sidebar:o,path:"/charts",onCollapse:function(){throw new Error("Function not implemented.")},isHidden:!1}))}var p=t(5976),d=t(3042),u=t(7346),h=t(5549);const g={chartsHeader:"chartsHeader_tuLv"};function b(e){let{children:a,title:t,subCategory:n,isChartsPage:l}=e;return r.createElement(h.A,{title:t},r.createElement("div",{className:g.chartsHeader},"Charts"),r.createElement("div",{className:s.A.docPage},r.createElement(m,null),r.createElement("main",{className:(0,i.A)(u.A.docMainContainer)},r.createElement("div",{className:(0,i.A)("container","padding-top--md","padding-bottom--lg")},r.createElement("div",{className:p.A.docItemContainer},r.createElement("article",null,r.createElement("nav",{className:d.A.breadcrumbsContainer},r.createElement("ul",{className:"breadcrumbs"},!l&&r.createElement("li",{className:"breadcrumbs__item"},r.createElement("a",{className:"breadcrumbs__link",href:"/charts"},"Charts")),n&&r.createElement("li",{className:"breadcrumbs__item"},r.createElement("a",{className:"breadcrumbs__link"},n)),r.createElement("li",{className:"breadcrumbs__item breadcrumbs__item--active"},r.createElement("span",{className:"breadcrumbs__link"},t),r.createElement("meta",{itemProp:"position",content:"2"})))),r.createElement("div",{className:(0,i.A)(c.G.docs.docMarkdown,"marklown")},a)))))))}},944:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var r=t(6540),s=t(4731);const n={parkingSpacesDates:"parkingSpacesDates_otBK",parkingSpaceDateItem:"parkingSpaceDateItem_w0Sc",failedLoadingSpaces:"failedLoadingSpaces_LnQS"};var c=t(2022);function l(e){const[a,t]=(0,r.useState)([]),[c,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(""!==i){d();let e=setInterval((()=>d()),5e3);return()=>clearInterval(e)}}),[i]),(0,r.useEffect)((()=>{u()}),[]),(0,r.useEffect)((()=>{0!==c.length&&o(c[0])}),[c]);const d=async()=>{p(!1);try{const e=await fetch(`https://data-api.glitch.je/v1/carparks/test-spaces?date=${i}`);t((await e.json()).reverse())}catch(e){console.error("Error fetching carpark spaces:",e),p(!0)}},u=async()=>{p(!1);try{const e=await fetch("https://data-api.glitch.je/v1/carparks/live-spaces/dates");l((await e.json()).results.reverse())}catch(e){console.error("Error fetching carpark spaces:",e),p(!0)}},h=()=>{let e="#";for(let a=0;a<6;a++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return r.createElement("div",null,m?r.createElement("div",{className:n.failedLoadingSpaces},r.createElement("p",null,"Failed to load carpark spaces"),r.createElement("button",{onClick:()=>u()},"Retry")):r.createElement(r.Fragment,null,r.createElement("div",{className:n.parkingSpacesDates},c.map((e=>r.createElement("div",{key:e,className:n.parkingSpaceDateItem,style:{backgroundColor:e===i?"black":"#ececec",color:e===i?"white":"black"},onClick:()=>o(e)},r.createElement("span",null,new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"})))))),!!i&&r.createElement("p",{style:{marginTop:"10px",marginBottom:0}},"Showing ",new Date(i).toDateString()),r.createElement(s.N1,{data:(()=>{const e=a.reduce(((e,a)=>{const{name:t,createdAt:r,spaces:s}=a;return e[t]||(e[t]=[]),e[t].push({createdAt:r,spaces:s}),e}),{}),t=Object.keys(e).map((a=>({label:a,data:e[a].map((e=>e.spaces)),borderColor:h(),backgroundColor:"rgba(0,0,0,0)"})));return{labels:Array.from(new Set(a.map((e=>new Date(e.createdAt).toLocaleTimeString())))),datasets:t}})(),options:{plugins:{title:{display:!0,position:"top"},legend:{display:!0,position:"top"},tooltip:{mode:"point",intersect:!1}}}})))}c.t1.register(c.PP,c.kc,c.FN,c.No,c.UA,c.hE,c.m_,c.s$);var i=t(9483),o=t(1107);function m(){return r.createElement(i.A,{title:"Parking Spaces Over Time",subCategory:"Transport"},r.createElement(o.A,{as:"h1"},"Parking Spaces Over Time"),r.createElement("p",null,"Available parking spaces in multi storey carparks, display over time. The information is updated roughly every 5 minutes."),r.createElement(l,null))}}}]);